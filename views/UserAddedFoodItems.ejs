<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>My Added Food Items</title>
  <style>
    /* Reset some default styles */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;

      background-image: url(../images/gracian.jpeg);

    }

    /* Header styles */
    h1 {
      text-align: center;
      background-color: #333;
      color: #fff;
      padding: 20px;
      margin: 0;
    }

    /* List styles */
    ul {
      list-style-type: none;
      padding: 0;
      margin: 20px;
    }

    li {
      display: flex; /* Use flexbox for layout */
      justify-content:space-around; /* Align items to the left and right */
      background-color: rgba(255, 255, 255, 0.5);
      padding: 20px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
      margin: 20px 0;
    }

    /* Form styles */
    form {
      margin-top: 10px;
    }

    button {
      background-color: #333;
      color: #fff;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
    }

    /* Return link styles */
    a {
      text-decoration: none;
      color: #fff;
      background-color: transparent;
      border-radius: 5px;
    }

    /* Style for the image */
    img {
      width: 200px; /* Adjust the width as needed */
      height: auto; /* Maintain the aspect ratio */
    }
  </style>
</head>

<body class="sub_page">

  <h1>

    <div class="navbar-left" style="display:flex;justify-content: space-between;">
      <div>
        Food Items Added by <%= user.username %>
      </div>

      <div>
        <a href="/userpage">Return</a>
      </div>

    </div>
  </h1>

  <ul>
    <div>

      <% userAddedFoodItems.forEach(function(foodItem) { %>

        <li>
          <div>
            <strong>Food Name:</strong> <%= foodItem.Foodname %><br>
            <strong>Quantity:</strong> <%= foodItem.quantity %><br>
            <strong>Expiry Date:</strong> <%= foodItem.expiryDate %><br>
            <strong>Status:</strong> <%= foodItem.status %><br>
            <!-- Inside the loop for displaying food items -->
            <strong>Description:</strong> <%= foodItem.description %><br>
            <form action="/deletefooduser" method="POST">
              <input type="hidden" name="foodItemId" value="<%= foodItem._id %>">
              <input type="hidden" name="userName" value="<%= user.username %>">
              <button type="submit">Delete</button>
          </div>

          <div>
            <!-- Align the image to the right -->
            <% if (foodItem.imageUrl) { %>
              <img src="<%= foodItem.imageUrl %>" alt="<%= foodItem.Foodname %> Image" onerror="imageError(this)">
            <% } else { %>
              <div>No Image</div>
            <% } %>
          </div>


          </form>
        </li>
      <% }); %>
    </div>
  </ul>

  <script>
    function imageError(img) {
      console.error("Image failed to load:", img.src);
      img.onerror = null; // prevent infinite loop in case the default "no image" placeholder fails to load
      img.src = "/path/to/default/image.jpg"; // replace with a default image URL
    }
  </script>
</body>

</html>
